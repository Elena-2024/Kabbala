
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Árbol de la Vida Cabalístico</title>
  <style>
    body {
      background: linear-gradient(to bottom right, #2c003e, #0b0033);
      color: #e0d4f7;
      font-family: 'Cormorant Garamond', serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 3em;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      font-size: 1.2em;
    }
    button {
      background-color: #6a0dad;
      color: white;
      cursor: pointer;
    }
    #resultado {
      margin-top: 30px;
      font-size: 1.2em;
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 15px;
      text-align: left;
      max-width: 800px;
      margin: 30px auto;
    }
    .mapa-container {
      position: relative;
      width: 300px;
      height: 550px;
      margin: 40px auto;
    }
    .mapa {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .circulo {
      width: 60px;
      height: 60px;
      background-color: rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #e0d4f7;
      position: absolute;
      transform: translate(-50%, -50%);
    }
    svg {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    line {
      stroke: #00ffe7;
      stroke-width: 3;
      filter: drop-shadow(0 0 5px #00ffe7);
      stroke-linecap: round;
    }
  </style>
</head>
<body>
  <h1>Árbol de la Vida Cabalístico</h1>
  <form id="formulario">
    <input type="text" id="nombre" placeholder="Nombre completo" required><br>
    <input type="date" id="fechaNacimiento" required><br>
    <button type="submit">Calcular Estructura</button>
  </form>
  <div id="resultado"></div>

  <script>
    const sefirot = {
      1: { nombre: "Kéter", x: 150, y: 50, interpretacion: "Voluntad divina, conexión al propósito superior." },
      2: { nombre: "Jojmá", x: 230, y: 120, interpretacion: "Sabiduría intuitiva, inspiración creativa." },
      3: { nombre: "Biná", x: 70, y: 120, interpretacion: "Comprensión profunda, estructura mental." },
      4: { nombre: "Jesed", x: 230, y: 220, interpretacion: "Amor incondicional, misericordia expansiva." },
      5: { nombre: "Guevurá", x: 70, y: 220, interpretacion: "Rigor sagrado, justicia equilibrada." },
      6: { nombre: "Tiféret", x: 150, y: 260, interpretacion: "Belleza interior, verdad espiritual." },
      7: { nombre: "Netzaj", x: 230, y: 350, interpretacion: "Victoria espiritual, perseverancia." },
      8: { nombre: "Hod", x: 70, y: 350, interpretacion: "Humildad sagrada, expresión divina." },
      9: { nombre: "Yesod", x: 150, y: 410, interpretacion: "Fundamento energético, conexión emocional." },
      10: { nombre: "Maljut", x: 150, y: 500, interpretacion: "Manifestación de la divinidad en el mundo físico." }
    };

    const conexiones = [
      [1,2],[1,3],[2,4],[3,5],[4,6],[5,6],[6,7],[6,8],[7,9],[8,9],[9,10]
    ];

    const mensajesAlma = {
      1: "Tu alma busca liderar y abrir nuevos caminos espirituales.",
      2: "Tu alma vino a unir, sanar relaciones y cooperar con amor.",
      3: "Traes el don de inspirar a través de la creatividad y la alegría.",
      4: "Tu misión es construir bases sólidas para la evolución del alma.",
      5: "Tu vida será un viaje de cambios sagrados y aprendizajes constantes.",
      6: "Has venido a servir desde el amor incondicional y el equilibrio.",
      7: "Tu esencia es la sabiduría interior y la conexión con el misterio.",
      8: "Tu alma manifiesta el poder divino en el mundo material.",
      9: "Eres un alma antigua llamada a servir a la humanidad con compasión."
    };

    document.getElementById('formulario').addEventListener('submit', function(e) {
      e.preventDefault();

      const fecha = document.getElementById('fechaNacimiento').value;
      const partes = fecha.split('-');
      const dia = partes[2];
      const mes = partes[1];
      const anio = partes[0].substring(2, 4);

      const numeros = (dia + mes + anio).split('').map(Number);
      let suma = numeros.reduce((a, b) => a + b, 0);
      while (suma >= 10) {
        suma = suma.toString().split('').reduce((a, b) => a + parseInt(b), 0);
      }

      let conteo = {};
      numeros.forEach(num => {
        conteo[num] = (conteo[num] || 0) + 1;
      });

      let html = `<h2>Mapa de Estructura Energética</h2><div class="mapa-container"><svg>`;
      conexiones.forEach(([a, b]) => {
        html += `<line x1="${sefirot[a].x}" y1="${sefirot[a].y}" x2="${sefirot[b].x}" y2="${sefirot[b].y}" />`;
      });
      html += `</svg><div class="mapa">`;
      for (let num in sefirot) {
        const s = sefirot[num];
        html += `<div class="circulo" style="left:${s.x}px; top:${s.y}px;" title="${s.nombre}">${num}</div>`;
      }
      html += `</div></div>`;

      html += `<h2>Resultado Energético</h2><p><strong>${suma}</strong></p>`;

      html += `<h2>Tareas</h2><ul>`;
      for (let num in conteo) {
        if (sefirot[num]) {
          html += `<li>${num} (${sefirot[num].nombre}): ${sefirot[num].interpretacion} - Aparece ${conteo[num]} veces</li>`;
        }
      }
      html += `</ul>`;

      html += `<h2>Escudos</h2><ul>`;
      for (let num in conteo) {
        if (conteo[num] > 1 && sefirot[num]) {
          html += `<li>${num} (${sefirot[num].nombre}): escudo protector (${sefirot[num].interpretacion})</li>`;
        }
      }
      html += `</ul>`;

      html += `<h2>Capitán Kármico / Dones</h2><ul>`;
      for (let num in sefirot) {
        if (!conteo[num]) {
          html += `<li>${num} (${sefirot[num].nombre}): don espiritual disponible - ${sefirot[num].interpretacion}</li>`;
        }
      }
      html += `</ul>`;

      html += `<h2>Mensaje para tu alma</h2><p>${mensajesAlma[suma]}</p>`;

      document.getElementById('resultado').innerHTML = html;
    });
  </script>
</body>
</html>
